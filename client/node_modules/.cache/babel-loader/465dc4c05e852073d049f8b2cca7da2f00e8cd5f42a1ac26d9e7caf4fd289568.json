{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MO ZAID\\\\OneDrive\\\\Desktop\\\\Assignment\\\\Calender\\\\client\\\\src\\\\components\\\\Calendar\\\\Calendar.js\",\n  _s = $RefreshSig$();\n// client/src/components/Calendar/Calendar.js\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport FullCalendar from '@fullcalendar/react'; // ✅ fixed import\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport { fetchEvents, updateEvent } from '../../redux/actions/eventActions';\nimport EventModal from '../EventModal/EventModal';\nimport './Calendar.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Calendar = ({\n  setCalendarRef\n}) => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    events\n  } = useSelector(state => state.events);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [currentEvent, setCurrentEvent] = useState(null);\n  const [modalType, setModalType] = useState('create'); // 'create' or 'edit'\n  const calendarRef = useRef(null);\n  useEffect(() => {\n    dispatch(fetchEvents());\n  }, [dispatch]);\n  useEffect(() => {\n    if (calendarRef.current) {\n      setCalendarRef(calendarRef.current.getApi());\n    }\n  }, [calendarRef, setCalendarRef]);\n  const handleDateClick = info => {\n    const startDate = info.date;\n    const endDate = new Date(startDate);\n    endDate.setHours(endDate.getHours() + 1);\n    setCurrentEvent({\n      title: '',\n      category: 'work',\n      start: startDate,\n      end: endDate\n    });\n    setModalType('create');\n    setModalOpen(true);\n  };\n  const handleEventClick = info => {\n    const {\n      event\n    } = info;\n    setCurrentEvent({\n      id: event.id,\n      title: event.title,\n      category: event.extendedProps.category || 'work',\n      start: event.start,\n      end: event.end,\n      color: event.backgroundColor,\n      taskId: event.extendedProps.taskId\n    });\n    setModalType('edit');\n    setModalOpen(true);\n  };\n  const handleEventDrop = info => {\n    const {\n      event\n    } = info;\n    dispatch(updateEvent(event.id, {\n      title: event.title,\n      start: event.start,\n      end: event.end,\n      category: event.extendedProps.category,\n      color: event.backgroundColor,\n      taskId: event.extendedProps.taskId\n    }));\n  };\n  const handleEventResize = info => {\n    const {\n      event\n    } = info;\n    dispatch(updateEvent(event.id, {\n      title: event.title,\n      start: event.start,\n      end: event.end,\n      category: event.extendedProps.category,\n      color: event.backgroundColor,\n      taskId: event.extendedProps.taskId\n    }));\n  };\n  const closeModal = () => {\n    setModalOpen(false);\n    setCurrentEvent(null);\n  };\n  const formatEvents = () => {\n    return events.map(event => ({\n      id: event._id,\n      title: event.title,\n      start: new Date(event.start),\n      end: new Date(event.end),\n      backgroundColor: event.color,\n      extendedProps: {\n        category: event.category,\n        taskId: event.taskId\n      }\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"calendar-container\",\n    children: [/*#__PURE__*/_jsxDEV(FullCalendar, {\n      ref: calendarRef,\n      plugins: [dayGridPlugin, timeGridPlugin, interactionPlugin],\n      initialView: \"timeGridWeek\",\n      headerToolbar: {\n        left: 'prev,next today',\n        center: 'title',\n        right: 'dayGridMonth,timeGridWeek,timeGridDay'\n      },\n      editable: true,\n      selectable: true,\n      selectMirror: true,\n      dayMaxEvents: true,\n      weekends: true,\n      events: formatEvents(),\n      dateClick: handleDateClick,\n      eventClick: handleEventClick,\n      eventDrop: handleEventDrop,\n      eventResize: handleEventResize,\n      slotMinTime: \"06:00:00\",\n      slotMaxTime: \"22:00:00\",\n      allDaySlot: false,\n      height: \"auto\",\n      droppable: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), modalOpen && /*#__PURE__*/_jsxDEV(EventModal, {\n      isOpen: modalOpen,\n      onClose: closeModal,\n      event: currentEvent,\n      type: modalType\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n};\n_s(Calendar, \"Kc53AO9ZyRyRPpCSf4PpEEJhiLM=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = Calendar;\nexport default Calendar;\nvar _c;\n$RefreshReg$(_c, \"Calendar\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useSelector","useDispatch","FullCalendar","dayGridPlugin","timeGridPlugin","interactionPlugin","fetchEvents","updateEvent","EventModal","jsxDEV","_jsxDEV","Calendar","setCalendarRef","_s","dispatch","events","state","modalOpen","setModalOpen","currentEvent","setCurrentEvent","modalType","setModalType","calendarRef","current","getApi","handleDateClick","info","startDate","date","endDate","Date","setHours","getHours","title","category","start","end","handleEventClick","event","id","extendedProps","color","backgroundColor","taskId","handleEventDrop","handleEventResize","closeModal","formatEvents","map","_id","className","children","ref","plugins","initialView","headerToolbar","left","center","right","editable","selectable","selectMirror","dayMaxEvents","weekends","dateClick","eventClick","eventDrop","eventResize","slotMinTime","slotMaxTime","allDaySlot","height","droppable","fileName","_jsxFileName","lineNumber","columnNumber","isOpen","onClose","type","_c","$RefreshReg$"],"sources":["C:/Users/MO ZAID/OneDrive/Desktop/Assignment/Calender/client/src/components/Calendar/Calendar.js"],"sourcesContent":["// client/src/components/Calendar/Calendar.js\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport FullCalendar from '@fullcalendar/react'; // ✅ fixed import\r\nimport dayGridPlugin from '@fullcalendar/daygrid';\r\nimport timeGridPlugin from '@fullcalendar/timegrid';\r\nimport interactionPlugin from '@fullcalendar/interaction';\r\nimport { fetchEvents, updateEvent } from '../../redux/actions/eventActions';\r\nimport EventModal from '../EventModal/EventModal';\r\nimport './Calendar.css';\r\n\r\n\r\nconst Calendar = ({ setCalendarRef }) => {\r\n  const dispatch = useDispatch();\r\n  const { events } = useSelector(state => state.events);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [currentEvent, setCurrentEvent] = useState(null);\r\n  const [modalType, setModalType] = useState('create'); // 'create' or 'edit'\r\n  const calendarRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchEvents());\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (calendarRef.current) {\r\n      setCalendarRef(calendarRef.current.getApi());\r\n    }\r\n  }, [calendarRef, setCalendarRef]);\r\n\r\n  const handleDateClick = (info) => {\r\n    const startDate = info.date;\r\n    const endDate = new Date(startDate);\r\n    endDate.setHours(endDate.getHours() + 1);\r\n\r\n    setCurrentEvent({\r\n      title: '',\r\n      category: 'work',\r\n      start: startDate,\r\n      end: endDate\r\n    });\r\n    setModalType('create');\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleEventClick = (info) => {\r\n    const { event } = info;\r\n    setCurrentEvent({\r\n      id: event.id,\r\n      title: event.title,\r\n      category: event.extendedProps.category || 'work',\r\n      start: event.start,\r\n      end: event.end,\r\n      color: event.backgroundColor,\r\n      taskId: event.extendedProps.taskId\r\n    });\r\n    setModalType('edit');\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleEventDrop = (info) => {\r\n    const { event } = info;\r\n    dispatch(updateEvent(event.id, {\r\n      title: event.title,\r\n      start: event.start,\r\n      end: event.end,\r\n      category: event.extendedProps.category,\r\n      color: event.backgroundColor,\r\n      taskId: event.extendedProps.taskId\r\n    }));\r\n  };\r\n\r\n  const handleEventResize = (info) => {\r\n    const { event } = info;\r\n    dispatch(updateEvent(event.id, {\r\n      title: event.title,\r\n      start: event.start,\r\n      end: event.end,\r\n      category: event.extendedProps.category,\r\n      color: event.backgroundColor,\r\n      taskId: event.extendedProps.taskId\r\n    }));\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setModalOpen(false);\r\n    setCurrentEvent(null);\r\n  };\r\n\r\n  const formatEvents = () => {\r\n    return events.map(event => ({\r\n      id: event._id,\r\n      title: event.title,\r\n      start: new Date(event.start),\r\n      end: new Date(event.end),\r\n      backgroundColor: event.color,\r\n      extendedProps: {\r\n        category: event.category,\r\n        taskId: event.taskId\r\n      }\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"calendar-container\">\r\n      <FullCalendar\r\n        ref={calendarRef}\r\n        plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}\r\n        initialView=\"timeGridWeek\"\r\n        headerToolbar={{\r\n          left: 'prev,next today',\r\n          center: 'title',\r\n          right: 'dayGridMonth,timeGridWeek,timeGridDay'\r\n        }}\r\n        editable={true}\r\n        selectable={true}\r\n        selectMirror={true}\r\n        dayMaxEvents={true}\r\n        weekends={true}\r\n        events={formatEvents()}\r\n        dateClick={handleDateClick}\r\n        eventClick={handleEventClick}\r\n        eventDrop={handleEventDrop}\r\n        eventResize={handleEventResize}\r\n        slotMinTime=\"06:00:00\"\r\n        slotMaxTime=\"22:00:00\"\r\n        allDaySlot={false}\r\n        height=\"auto\"\r\n        droppable={true}\r\n      />\r\n      \r\n      {modalOpen && (\r\n        <EventModal\r\n          isOpen={modalOpen}\r\n          onClose={closeModal}\r\n          event={currentEvent}\r\n          type={modalType}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Calendar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}